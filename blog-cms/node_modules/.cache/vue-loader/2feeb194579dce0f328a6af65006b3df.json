{"remainingRequest":"D:\\finalProject3\\Blog\\blog-cms\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\finalProject3\\Blog\\blog-cms\\src\\views\\blog\\blog\\WriteBlog.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\finalProject3\\Blog\\blog-cms\\src\\views\\blog\\blog\\WriteBlog.vue","mtime":1724744615943},{"path":"D:\\finalProject3\\Blog\\blog-cms\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1724724146465},{"path":"D:\\finalProject3\\Blog\\blog-cms\\node_modules\\babel-loader\\lib\\index.js","mtime":1724724148277},{"path":"D:\\finalProject3\\Blog\\blog-cms\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1724724146465},{"path":"D:\\finalProject3\\Blog\\blog-cms\\node_modules\\vue-loader\\lib\\index.js","mtime":1724724133444}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQoJaW1wb3J0IEJyZWFkY3J1bWIgZnJvbSAiQC9jb21wb25lbnRzL0JyZWFkY3J1bWIiOw0KCWltcG9ydCB7Z2V0Q2F0ZWdvcnlBbmRUYWcsIHNhdmVCbG9nLCBnZXRCbG9nQnlJZCwgdXBkYXRlQmxvZ30gZnJvbSAnQC9hcGkvYmxvZycNCglpbXBvcnQgVmRpdG9yIGZyb20gJ3ZkaXRvcicNCg0KCWV4cG9ydCBkZWZhdWx0IHsNCgkJbmFtZTogIldyaXRlQmxvZyIsDQoJCWNvbXBvbmVudHM6IHtCcmVhZGNydW1ifSwNCgkJZGF0YSgpIHsNCgkJCXJldHVybiB7DQoJCQkJcmVhZHk6IGZhbHNlLA0KCQkJCWRlc2NyaXB0aW9uVmRpdG9yOiBudWxsLA0KCQkJCWNvbnRlbnRWZGl0b3I6IG51bGwsDQoJCQkJY2F0ZWdvcnlMaXN0OiBbXSwNCgkJCQl0YWdMaXN0OiBbXSwNCgkJCQlkaWFsb2dWaXNpYmxlOiBmYWxzZSwNCgkJCQlyYWRpbzogMSwNCgkJCQlmb3JtOiB7DQoJCQkJCXRpdGxlOiAnJywNCgkJCQkJZmlyc3RQaWN0dXJlOiAnJywNCgkJCQkJZGVzY3JpcHRpb246ICcnLA0KCQkJCQljb250ZW50OiAnJywNCgkJCQkJY2F0ZTogbnVsbCwNCgkJCQkJdGFnTGlzdDogW10sDQoJCQkJCXdvcmRzOiBudWxsLA0KCQkJCQlyZWFkVGltZTogbnVsbCwNCgkJCQkJdmlld3M6IDAsDQoJCQkJCWFwcHJlY2lhdGlvbjogZmFsc2UsDQoJCQkJCXJlY29tbWVuZDogZmFsc2UsDQoJCQkJCWNvbW1lbnRFbmFibGVkOiBmYWxzZSwNCgkJCQkJdG9wOiBmYWxzZSwNCgkJCQkJcHVibGlzaGVkOiBmYWxzZSwNCgkJCQkJcGFzc3dvcmQ6ICcnLA0KCQkJCX0sDQoJCQkJZm9ybVJ1bGVzOiB7DQoJCQkJCXRpdGxlOiBbe3JlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn6K+36L6T5YWl5qCH6aKYJywgdHJpZ2dlcjogJ2NoYW5nZSd9XSwNCgkJCQkJLy9maXJzdFBpY3R1cmU6IFt7cmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfor7fovpPlhaXpppblm77pk77mjqUnLCB0cmlnZ2VyOiAnY2hhbmdlJ31dLA0KCQkJCQljYXRlOiBbe3JlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn6K+36YCJ5oup5YiG57G7JywgdHJpZ2dlcjogJ2NoYW5nZSd9XSwNCgkJCQkJLy8gdGFnTGlzdDogW3tyZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+mAieaLqeagh+etvicsIHRyaWdnZXI6ICdjaGFuZ2UnfV0sDQoJCQkJfSwNCgkJCX0NCgkJfSwNCgkJY3JlYXRlZCgpIHsNCgkJCXRoaXMuZ2V0RGF0YSgpDQoJCX0sDQoJCW1vdW50ZWQoKSB7DQoJCQl0aGlzLmluaXREZXNjcmlwdGlvblZkaXRvcigpDQoJCQl0aGlzLmluaXRDb250ZW50VmRpdG9yKCkNCgkJfSwNCgkJbWV0aG9kczogew0KCQkJLy/liJ3lp4vljJZtZOe8lui+keWZqA0KCQkJaW5pdERlc2NyaXB0aW9uVmRpdG9yKCkgew0KCQkJCWNvbnN0IG9wdGlvbnMgPSB7DQoJCQkJCWhlaWdodDogMzIwLA0KCQkJCQltb2RlOiAnc3YnLC8v5YiG5bGP5riy5p+TDQoJCQkJCW91dGxpbmU6IHRydWUsLy/lpKfnurINCgkJCQkJY2FjaGU6IHsvL+S4jee8k+WtmOWIsGxvY2FsU3RvcmFnZQ0KCQkJCQkJZW5hYmxlOiBmYWxzZSwNCgkJCQkJfSwNCgkJCQkJcmVzaXplOiB7Ly/lj6/osIPmlbTpq5jluqYNCgkJCQkJCWVuYWJsZTogdHJ1ZQ0KCQkJCQl9LA0KCQkJCQlhZnRlcjogKCkgPT4gew0KCQkJCQkJaWYgKCF0aGlzLnJlYWR5KSB7DQoJCQkJCQkJdGhpcy5yZWFkeSA9IHRydWUgLy/kuKTkuKrnvJbovpHlmajpg73liqDovb3lrozmiJDlkI7miafooYzvvIzpgb/lhY3ph43lpI3or7fmsYINCgkJCQkJCX0gZWxzZSBpZiAodGhpcy4kcm91dGUucGFyYW1zLmlkKSB7DQoJCQkJCQkJdGhpcy5nZXRCbG9nKHRoaXMuJHJvdXRlLnBhcmFtcy5pZCkNCgkJCQkJCX0NCgkJCQkJfQ0KCQkJCX0NCgkJCQl0aGlzLmRlc2NyaXB0aW9uVmRpdG9yID0gbmV3IFZkaXRvcigndmRpdG9yLWRlc2NyaXB0aW9uJywgb3B0aW9ucykNCgkJCX0sDQoJCQlpbml0Q29udGVudFZkaXRvcigpIHsNCgkJCQljb25zdCBvcHRpb25zID0gew0KCQkJCQloZWlnaHQ6IDY0MCwNCgkJCQkJbW9kZTogJ3N2JywvL+WIhuWxj+a4suafkw0KCQkJCQlvdXRsaW5lOiB0cnVlLC8v5aSn57qyDQoJCQkJCWNhY2hlOiB7Ly/kuI3nvJPlrZjliLBsb2NhbFN0b3JhZ2UNCgkJCQkJCWVuYWJsZTogZmFsc2UsDQoJCQkJCX0sDQoJCQkJCXJlc2l6ZTogey8v5Y+v6LCD5pW06auY5bqmDQoJCQkJCQllbmFibGU6IHRydWUNCgkJCQkJfSwNCgkJCQkJYWZ0ZXI6ICgpID0+IHsNCgkJCQkJCWlmICghdGhpcy5yZWFkeSkgew0KCQkJCQkJCXRoaXMucmVhZHkgPSB0cnVlDQoJCQkJCQl9IGVsc2UgaWYgKHRoaXMuJHJvdXRlLnBhcmFtcy5pZCkgew0KCQkJCQkJCXRoaXMuZ2V0QmxvZyh0aGlzLiRyb3V0ZS5wYXJhbXMuaWQpDQoJCQkJCQl9DQoJCQkJCX0NCgkJCQl9DQoJCQkJdGhpcy5jb250ZW50VmRpdG9yID0gbmV3IFZkaXRvcigndmRpdG9yLWNvbnRlbnQnLCBvcHRpb25zKQ0KCQkJfSwNCgkJCWdldEJsb2coaWQpIHsNCgkJCQkvL+e8lui+keWNmuWuog0KCQkJCWdldEJsb2dCeUlkKGlkKS50aGVuKHJlcyA9PiB7DQoJCQkJCWlmIChyZXMuY29kZSA9PT0gMjAwKSB7DQoJCQkJCQl0aGlzLmNvbXB1dGVDYXRlZ29yeUFuZFRhZyhyZXMuZGF0YSkNCgkJCQkJCS8vIHRoaXMubXNnU3VjY2VzcyhyZXMubXNnKTsNCgkJCQkJCXRoaXMuZm9ybSA9IHJlcy5kYXRhDQoJCQkJCQl0aGlzLmRlc2NyaXB0aW9uVmRpdG9yLnNldFZhbHVlKHRoaXMuZm9ybS5kZXNjcmlwdGlvbikNCgkJCQkJCXRoaXMuY29udGVudFZkaXRvci5zZXRWYWx1ZSh0aGlzLmZvcm0uY29udGVudCkNCgkJCQkJCXRoaXMucmFkaW8gPSB0aGlzLmZvcm0ucHVibGlzaGVkID8gKHRoaXMuZm9ybS5wYXNzd29yZCAhPT0gJycgPyAzIDogMSkgOiAyDQoJCQkJCX0gZWxzZSB7DQoJCQkJCQl0aGlzLm1zZ0Vycm9yKHJlcy5tc2cpDQoJCQkJCX0NCgkJCQl9KS5jYXRjaCgoKSA9PiB7DQoJCQkJCXRoaXMubXNnRXJyb3IoJ+ivt+axguWksei0pScpDQoJCQkJfSkNCgkJCX0sDQoJCQljb21wdXRlQ2F0ZWdvcnlBbmRUYWcoYmxvZykgew0KCQkJCWJsb2cuY2F0ZSA9IGJsb2cuY2F0ZWdvcnkuaWQNCgkJCQlibG9nLnRhZ0xpc3QgPSBbXQ0KCQkJCWJsb2cudGFncy5mb3JFYWNoKGl0ZW0gPT4gew0KCQkJCQlibG9nLnRhZ0xpc3QucHVzaChpdGVtLmlkKQ0KCQkJCX0pDQoJCQl9LA0KCQkJZ2V0RGF0YSgpIHsNCgkJCQkvL+iOt+WPluebruW9leWSjOagh+etvg0KCQkJCWdldENhdGVnb3J5QW5kVGFnKCkudGhlbihyZXMgPT4gew0KCQkJCQlpZiAocmVzLmNvZGUgPT09IDIwMCkgew0KCQkJCQkJLy8gdGhpcy5tc2dTdWNjZXNzKHJlcy5tc2cpOw0KCQkJCQkJdGhpcy5jYXRlZ29yeUxpc3QgPSByZXMuZGF0YS5jYXRlZ29yaWVzDQoJCQkJCQl0aGlzLnRhZ0xpc3QgPSByZXMuZGF0YS50YWdzDQoJCQkJCX0gZWxzZSB7DQoJCQkJCQl0aGlzLm1zZ0Vycm9yKHJlcy5tc2cpDQoJCQkJCX0NCgkJCQl9KS5jYXRjaCgoKSA9PiB7DQoJCQkJCXRoaXMubXNnRXJyb3IoJ+ivt+axguWksei0pScpDQoJCQkJfSkNCgkJCX0sDQoJCQlzdWJtaXQoKSB7DQoJCQkJaWYgKHRoaXMucmFkaW8gPT09IDMgJiYgKHRoaXMuZm9ybS5wYXNzd29yZCA9PT0gJycgfHwgdGhpcy5mb3JtLnBhc3N3b3JkID09PSBudWxsKSkgew0KCQkJCQlyZXR1cm4gdGhpcy5tc2dFcnJvcigi5a+G56CB5L+d5oqk5qih5byP5b+F6aG75aGr5YaZ5a+G56CB77yBIikNCgkJCQl9DQoJCQkJdGhpcy4kcmVmcy5mb3JtUmVmLnZhbGlkYXRlKHZhbGlkID0+IHsNCgkJCQkJaWYgKHZhbGlkKSB7DQoJCQkJCQl0aGlzLmZvcm0uZGVzY3JpcHRpb24gPSB0aGlzLmRlc2NyaXB0aW9uVmRpdG9yLmdldFZhbHVlKCkNCgkJCQkJCXRoaXMuZm9ybS5jb250ZW50ID0gdGhpcy5jb250ZW50VmRpdG9yLmdldFZhbHVlKCkNCgkJCQkJCWlmICh0aGlzLnJhZGlvID09PSAyKSB7DQoJCQkJCQkJdGhpcy5mb3JtLmFwcHJlY2lhdGlvbiA9IGZhbHNlDQoJCQkJCQkJdGhpcy5mb3JtLnJlY29tbWVuZCA9IGZhbHNlDQoJCQkJCQkJdGhpcy5mb3JtLmNvbW1lbnRFbmFibGVkID0gZmFsc2UNCgkJCQkJCQl0aGlzLmZvcm0udG9wID0gZmFsc2UNCgkJCQkJCQl0aGlzLmZvcm0ucHVibGlzaGVkID0gZmFsc2UNCgkJCQkJCX0gZWxzZSB7DQoJCQkJCQkJdGhpcy5mb3JtLnB1Ymxpc2hlZCA9IHRydWUNCgkJCQkJCX0NCgkJCQkJCWlmICh0aGlzLnJhZGlvICE9PSAzKSB7DQoJCQkJCQkJdGhpcy5mb3JtLnBhc3N3b3JkID0gJycNCgkJCQkJCX0NCgkJCQkJCWlmICh0aGlzLiRyb3V0ZS5wYXJhbXMuaWQpIHsNCgkJCQkJCQl0aGlzLmZvcm0uY2F0ZWdvcnkgPSBudWxsDQoJCQkJCQkJdGhpcy5mb3JtLnRhZ3MgPSBudWxsDQoJCQkJCQkJdXBkYXRlQmxvZyh0aGlzLmZvcm0pLnRoZW4ocmVzID0+IHsNCgkJCQkJCQkJaWYgKHJlcy5jb2RlID09PSAyMDApIHsNCgkJCQkJCQkJCXRoaXMubXNnU3VjY2VzcyhyZXMubXNnKQ0KCQkJCQkJCQkJdGhpcy4kcm91dGVyLnB1c2goJy9ibG9ncycpDQoJCQkJCQkJCX0gZWxzZSB7DQoJCQkJCQkJCQl0aGlzLm1zZ0Vycm9yKHJlcy5tc2cpDQoJCQkJCQkJCX0NCgkJCQkJCQl9KS5jYXRjaCgoKSA9PiB7DQoJCQkJCQkJCXRoaXMubXNnRXJyb3IoJ+ivt+axguWksei0pScpDQoJCQkJCQkJfSkNCgkJCQkJCX0gZWxzZSB7DQoJCQkJCQkJc2F2ZUJsb2codGhpcy5mb3JtKS50aGVuKHJlcyA9PiB7DQoJCQkJCQkJCWlmIChyZXMuY29kZSA9PT0gMjAwKSB7DQoJCQkJCQkJCQl0aGlzLm1zZ1N1Y2Nlc3MocmVzLm1zZykNCgkJCQkJCQkJCXRoaXMuJHJvdXRlci5wdXNoKCcvYmxvZ3MnKQ0KCQkJCQkJCQl9IGVsc2Ugew0KCQkJCQkJCQkJdGhpcy5tc2dFcnJvcihyZXMubXNnKQ0KCQkJCQkJCQl9DQoJCQkJCQkJfSkuY2F0Y2goKCkgPT4gew0KCQkJCQkJCQl0aGlzLm1zZ0Vycm9yKCfor7fmsYLlpLHotKUnKQ0KCQkJCQkJCX0pDQoJCQkJCQl9DQoJCQkJCX0gZWxzZSB7DQoJCQkJCQl0aGlzLmRpYWxvZ1Zpc2libGUgPSBmYWxzZQ0KCQkJCQkJcmV0dXJuIHRoaXMubXNnRXJyb3IoJ+ivt+Whq+WGmeW/heimgeeahOihqOWNlemhuScpDQoJCQkJCX0NCgkJCQl9KQ0KCQkJfQ0KCQl9DQoJfQ0K"},{"version":3,"sources":["WriteBlog.vue"],"names":[],"mappings":";AAiGA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"WriteBlog.vue","sourceRoot":"src/views/blog/blog","sourcesContent":["<template>\r\n\t<div>\r\n\t\t<!--面包屑导航-->\r\n\t\t<Breadcrumb parentTitle=\"博客管理\"/>\r\n\r\n\t\t<el-form :model=\"form\" :rules=\"formRules\" ref=\"formRef\" label-position=\"top\">\r\n\t\t\t<el-row :gutter=\"20\">\r\n\t\t\t\t<el-col :span=\"12\">\r\n\t\t\t\t\t<el-form-item label=\"标题\" prop=\"title\">\r\n\t\t\t\t\t\t<el-input v-model=\"form.title\" placeholder=\"请输入标题\"></el-input>\r\n\t\t\t\t\t</el-form-item>\r\n\t\t\t\t</el-col>\r\n\t\t\t\t<!-- <el-col :span=\"12\">\r\n\t\t\t\t\t<el-form-item label=\"封面图\" prop=\"firstPicture\">\r\n\t\t\t\t\t\t<el-input v-model=\"form.firstPicture\" placeholder=\"可不填，随机获取\"></el-input>\r\n\t\t\t\t\t</el-form-item>\r\n\t\t\t\t</el-col> -->\r\n\t\t\t</el-row>\r\n\r\n\t\t\t<!-- <el-alert title=\"注意：如果从 Typora 中复制 Markdown，粘贴时要选择粘贴为纯文本，\r\n\t\t\t 否则代码块可能无法被 prismjs 高亮\" type=\"warning\" center show-icon></el-alert> -->\r\n\r\n\t\t\t<el-form-item label=\"描述\" prop=\"description\">\r\n\t\t\t\t<div id=\"vditor-description\"></div>\r\n\t\t\t</el-form-item>\r\n\r\n\t\t\t<el-form-item label=\"正文\" prop=\"content\">\r\n\t\t\t\t<div id=\"vditor-content\"></div>\r\n\t\t\t</el-form-item>\r\n\r\n\t\t\t<el-row :gutter=\"20\">\r\n\t\t\t\t<el-col :span=\"12\">\r\n\t\t\t\t\t<el-form-item label=\"分类\" prop=\"cate\">\r\n\t\t\t\t\t\t<el-select v-model=\"form.cate\" placeholder=\"请选择分类（输入可添加新分类）\" :allow-create=\"true\" :filterable=\"true\" style=\"width: 100%;\">\r\n\t\t\t\t\t\t\t<el-option :label=\"item.name\" :value=\"item.id\" v-for=\"item in categoryList\" :key=\"item.id\"></el-option>\r\n\t\t\t\t\t\t</el-select>\r\n\t\t\t\t\t</el-form-item>\r\n\t\t\t\t</el-col>\r\n\t\t\t\t<el-col :span=\"12\">\r\n\t\t\t\t\t<el-form-item label=\"标签\" prop=\"tagList\">\r\n\t\t\t\t\t\t<el-select v-model=\"form.tagList\" placeholder=\"请选择标签（输入可添加新标签）\" :allow-create=\"true\" :filterable=\"true\" :multiple=\"true\" style=\"width: 100%;\">\r\n\t\t\t\t\t\t\t<el-option :label=\"item.name\" :value=\"item.id\" v-for=\"item in tagList\" :key=\"item.id\"></el-option>\r\n\t\t\t\t\t\t</el-select>\r\n\t\t\t\t\t</el-form-item>\r\n\t\t\t\t</el-col>\r\n\t\t\t</el-row>\r\n\r\n\t\t\t<!-- <el-form-item label=\"浏览次数\" prop=\"views\">\r\n\t\t\t\t<el-input v-model=\"form.views\" placeholder=\"文章访问量（默认为 0）\" type=\"number\" style=\"width: 50%;\"></el-input>\r\n\t\t\t</el-form-item> -->\r\n\r\n\t\t\t<el-form-item style=\"text-align: right;\">\r\n\t\t\t\t<el-button type=\"primary\" @click=\"dialogVisible=true\">保存</el-button>\r\n\t\t\t</el-form-item>\r\n\t\t</el-form>\r\n\r\n\t\t<!--编辑可见性状态对话框-->\r\n\t\t<el-dialog title=\"博客可见性\" width=\"30%\" :visible.sync=\"dialogVisible\">\r\n\t\t\t<!--内容主体-->\r\n\t\t\t<el-form label-width=\"50px\" @submit.native.prevent>\r\n\t\t\t\t<el-form-item>\r\n\t\t\t\t\t<el-radio-group v-model=\"radio\">\r\n\t\t\t\t\t\t<el-radio :label=\"1\">公开</el-radio>\r\n\t\t\t\t\t\t<el-radio :label=\"2\">私密</el-radio>\r\n\t\t\t\t\t\t<el-radio :label=\"3\">密码保护</el-radio>\r\n\t\t\t\t\t</el-radio-group>\r\n\t\t\t\t</el-form-item>\r\n\t\t\t\t<el-form-item label=\"密码\" v-if=\"radio===3\">\r\n\t\t\t\t\t<el-input v-model=\"form.password\"></el-input>\r\n\t\t\t\t</el-form-item>\r\n\t\t\t\t<el-form-item v-if=\"radio!==2\">\r\n\t\t\t\t\t<el-row>\r\n\t\t\t\t\t\t<!-- <el-col :span=\"6\">\r\n\t\t\t\t\t\t\t<el-switch v-model=\"form.appreciation\" active-text=\"赞赏\"></el-switch>\r\n\t\t\t\t\t\t</el-col> -->\r\n\t\t\t\t\t\t<el-col :span=\"6\">\r\n\t\t\t\t\t\t\t<el-switch v-model=\"form.recommend\" active-text=\"推荐\"></el-switch>\r\n\t\t\t\t\t\t</el-col>\r\n\t\t\t\t\t\t<!-- <el-col :span=\"6\">\r\n\t\t\t\t\t\t\t<el-switch v-model=\"form.commentEnabled\" active-text=\"评论\"></el-switch>\r\n\t\t\t\t\t\t</el-col> -->\r\n\t\t\t\t\t\t<el-col :span=\"6\">\r\n\t\t\t\t\t\t\t<el-switch v-model=\"form.top\" active-text=\"置顶\"></el-switch>\r\n\t\t\t\t\t\t</el-col>\r\n\t\t\t\t\t</el-row>\r\n\t\t\t\t</el-form-item>\r\n\t\t\t</el-form>\r\n\t\t\t<!--底部-->\r\n\t\t\t<span slot=\"footer\">\r\n\t\t\t\t<el-button @click=\"dialogVisible=false\">取 消</el-button>\r\n\t\t\t\t<el-button type=\"primary\" @click=\"submit\">保存</el-button>\r\n\t\t\t</span>\r\n\t\t</el-dialog>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n\timport Breadcrumb from \"@/components/Breadcrumb\";\r\n\timport {getCategoryAndTag, saveBlog, getBlogById, updateBlog} from '@/api/blog'\r\n\timport Vditor from 'vditor'\r\n\r\n\texport default {\r\n\t\tname: \"WriteBlog\",\r\n\t\tcomponents: {Breadcrumb},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tready: false,\r\n\t\t\t\tdescriptionVditor: null,\r\n\t\t\t\tcontentVditor: null,\r\n\t\t\t\tcategoryList: [],\r\n\t\t\t\ttagList: [],\r\n\t\t\t\tdialogVisible: false,\r\n\t\t\t\tradio: 1,\r\n\t\t\t\tform: {\r\n\t\t\t\t\ttitle: '',\r\n\t\t\t\t\tfirstPicture: '',\r\n\t\t\t\t\tdescription: '',\r\n\t\t\t\t\tcontent: '',\r\n\t\t\t\t\tcate: null,\r\n\t\t\t\t\ttagList: [],\r\n\t\t\t\t\twords: null,\r\n\t\t\t\t\treadTime: null,\r\n\t\t\t\t\tviews: 0,\r\n\t\t\t\t\tappreciation: false,\r\n\t\t\t\t\trecommend: false,\r\n\t\t\t\t\tcommentEnabled: false,\r\n\t\t\t\t\ttop: false,\r\n\t\t\t\t\tpublished: false,\r\n\t\t\t\t\tpassword: '',\r\n\t\t\t\t},\r\n\t\t\t\tformRules: {\r\n\t\t\t\t\ttitle: [{required: true, message: '请输入标题', trigger: 'change'}],\r\n\t\t\t\t\t//firstPicture: [{required: true, message: '请输入首图链接', trigger: 'change'}],\r\n\t\t\t\t\tcate: [{required: true, message: '请选择分类', trigger: 'change'}],\r\n\t\t\t\t\t// tagList: [{required: true, message: '请选择标签', trigger: 'change'}],\r\n\t\t\t\t},\r\n\t\t\t}\r\n\t\t},\r\n\t\tcreated() {\r\n\t\t\tthis.getData()\r\n\t\t},\r\n\t\tmounted() {\r\n\t\t\tthis.initDescriptionVditor()\r\n\t\t\tthis.initContentVditor()\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t//初始化md编辑器\r\n\t\t\tinitDescriptionVditor() {\r\n\t\t\t\tconst options = {\r\n\t\t\t\t\theight: 320,\r\n\t\t\t\t\tmode: 'sv',//分屏渲染\r\n\t\t\t\t\toutline: true,//大纲\r\n\t\t\t\t\tcache: {//不缓存到localStorage\r\n\t\t\t\t\t\tenable: false,\r\n\t\t\t\t\t},\r\n\t\t\t\t\tresize: {//可调整高度\r\n\t\t\t\t\t\tenable: true\r\n\t\t\t\t\t},\r\n\t\t\t\t\tafter: () => {\r\n\t\t\t\t\t\tif (!this.ready) {\r\n\t\t\t\t\t\t\tthis.ready = true //两个编辑器都加载完成后执行，避免重复请求\r\n\t\t\t\t\t\t} else if (this.$route.params.id) {\r\n\t\t\t\t\t\t\tthis.getBlog(this.$route.params.id)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis.descriptionVditor = new Vditor('vditor-description', options)\r\n\t\t\t},\r\n\t\t\tinitContentVditor() {\r\n\t\t\t\tconst options = {\r\n\t\t\t\t\theight: 640,\r\n\t\t\t\t\tmode: 'sv',//分屏渲染\r\n\t\t\t\t\toutline: true,//大纲\r\n\t\t\t\t\tcache: {//不缓存到localStorage\r\n\t\t\t\t\t\tenable: false,\r\n\t\t\t\t\t},\r\n\t\t\t\t\tresize: {//可调整高度\r\n\t\t\t\t\t\tenable: true\r\n\t\t\t\t\t},\r\n\t\t\t\t\tafter: () => {\r\n\t\t\t\t\t\tif (!this.ready) {\r\n\t\t\t\t\t\t\tthis.ready = true\r\n\t\t\t\t\t\t} else if (this.$route.params.id) {\r\n\t\t\t\t\t\t\tthis.getBlog(this.$route.params.id)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis.contentVditor = new Vditor('vditor-content', options)\r\n\t\t\t},\r\n\t\t\tgetBlog(id) {\r\n\t\t\t\t//编辑博客\r\n\t\t\t\tgetBlogById(id).then(res => {\r\n\t\t\t\t\tif (res.code === 200) {\r\n\t\t\t\t\t\tthis.computeCategoryAndTag(res.data)\r\n\t\t\t\t\t\t// this.msgSuccess(res.msg);\r\n\t\t\t\t\t\tthis.form = res.data\r\n\t\t\t\t\t\tthis.descriptionVditor.setValue(this.form.description)\r\n\t\t\t\t\t\tthis.contentVditor.setValue(this.form.content)\r\n\t\t\t\t\t\tthis.radio = this.form.published ? (this.form.password !== '' ? 3 : 1) : 2\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.msgError(res.msg)\r\n\t\t\t\t\t}\r\n\t\t\t\t}).catch(() => {\r\n\t\t\t\t\tthis.msgError('请求失败')\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tcomputeCategoryAndTag(blog) {\r\n\t\t\t\tblog.cate = blog.category.id\r\n\t\t\t\tblog.tagList = []\r\n\t\t\t\tblog.tags.forEach(item => {\r\n\t\t\t\t\tblog.tagList.push(item.id)\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tgetData() {\r\n\t\t\t\t//获取目录和标签\r\n\t\t\t\tgetCategoryAndTag().then(res => {\r\n\t\t\t\t\tif (res.code === 200) {\r\n\t\t\t\t\t\t// this.msgSuccess(res.msg);\r\n\t\t\t\t\t\tthis.categoryList = res.data.categories\r\n\t\t\t\t\t\tthis.tagList = res.data.tags\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.msgError(res.msg)\r\n\t\t\t\t\t}\r\n\t\t\t\t}).catch(() => {\r\n\t\t\t\t\tthis.msgError('请求失败')\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tsubmit() {\r\n\t\t\t\tif (this.radio === 3 && (this.form.password === '' || this.form.password === null)) {\r\n\t\t\t\t\treturn this.msgError(\"密码保护模式必须填写密码！\")\r\n\t\t\t\t}\r\n\t\t\t\tthis.$refs.formRef.validate(valid => {\r\n\t\t\t\t\tif (valid) {\r\n\t\t\t\t\t\tthis.form.description = this.descriptionVditor.getValue()\r\n\t\t\t\t\t\tthis.form.content = this.contentVditor.getValue()\r\n\t\t\t\t\t\tif (this.radio === 2) {\r\n\t\t\t\t\t\t\tthis.form.appreciation = false\r\n\t\t\t\t\t\t\tthis.form.recommend = false\r\n\t\t\t\t\t\t\tthis.form.commentEnabled = false\r\n\t\t\t\t\t\t\tthis.form.top = false\r\n\t\t\t\t\t\t\tthis.form.published = false\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.form.published = true\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (this.radio !== 3) {\r\n\t\t\t\t\t\t\tthis.form.password = ''\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (this.$route.params.id) {\r\n\t\t\t\t\t\t\tthis.form.category = null\r\n\t\t\t\t\t\t\tthis.form.tags = null\r\n\t\t\t\t\t\t\tupdateBlog(this.form).then(res => {\r\n\t\t\t\t\t\t\t\tif (res.code === 200) {\r\n\t\t\t\t\t\t\t\t\tthis.msgSuccess(res.msg)\r\n\t\t\t\t\t\t\t\t\tthis.$router.push('/blogs')\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tthis.msgError(res.msg)\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}).catch(() => {\r\n\t\t\t\t\t\t\t\tthis.msgError('请求失败')\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tsaveBlog(this.form).then(res => {\r\n\t\t\t\t\t\t\t\tif (res.code === 200) {\r\n\t\t\t\t\t\t\t\t\tthis.msgSuccess(res.msg)\r\n\t\t\t\t\t\t\t\t\tthis.$router.push('/blogs')\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tthis.msgError(res.msg)\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}).catch(() => {\r\n\t\t\t\t\t\t\t\tthis.msgError('请求失败')\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.dialogVisible = false\r\n\t\t\t\t\t\treturn this.msgError('请填写必要的表单项')\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style scoped>\r\n\t@import \"~vditor/dist/index.css\";\r\n</style>"]}]}