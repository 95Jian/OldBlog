{"remainingRequest":"D:\\finalProject3\\Blog\\blog-cms\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\finalProject3\\Blog\\blog-cms\\src\\views\\page\\About.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\finalProject3\\Blog\\blog-cms\\src\\views\\page\\About.vue","mtime":1724679300468},{"path":"D:\\finalProject3\\Blog\\blog-cms\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1724724146465},{"path":"D:\\finalProject3\\Blog\\blog-cms\\node_modules\\babel-loader\\lib\\index.js","mtime":1724724148277},{"path":"D:\\finalProject3\\Blog\\blog-cms\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1724724146465},{"path":"D:\\finalProject3\\Blog\\blog-cms\\node_modules\\vue-loader\\lib\\index.js","mtime":1724724133444}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQoJaW1wb3J0IEJyZWFkY3J1bWIgZnJvbSAiQC9jb21wb25lbnRzL0JyZWFkY3J1bWIiOw0KCWltcG9ydCB7Z2V0QWJvdXQsIHVwZGF0ZUFib3V0fSBmcm9tICJAL2FwaS9hYm91dCI7DQoJaW1wb3J0IFZkaXRvciBmcm9tICJ2ZGl0b3IiOw0KDQoJZXhwb3J0IGRlZmF1bHQgew0KCQluYW1lOiAiQWJvdXQiLA0KCQljb21wb25lbnRzOiB7QnJlYWRjcnVtYn0sDQoJCWRhdGEoKSB7DQoJCQlyZXR1cm4gew0KCQkJCXZkaXRvcjogbnVsbCwNCgkJCQlmb3JtOiB7DQoJCQkJCXRpdGxlOiAnJywNCgkJCQkJbXVzaWNJZDogbnVsbCwNCgkJCQkJY29udGVudDogJycsDQoJCQkJCWNvbW1lbnRFbmFibGVkOiB0cnVlDQoJCQkJfSwNCgkJCQlmb3JtUnVsZXM6IHsNCgkJCQkJdGl0bGU6IFt7cmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfor7fovpPlhaXmoIfpopgnLCB0cmlnZ2VyOiAnY2hhbmdlJ31dLA0KCQkJCX0NCgkJCX0NCgkJfSwNCgkJbW91bnRlZCgpIHsNCgkJCXRoaXMuaW5pdFZkaXRvcigpDQoJCX0sDQoJCW1ldGhvZHM6IHsNCgkJCS8v5Yid5aeL5YyWbWTnvJbovpHlmagNCgkJCWluaXRWZGl0b3IoKSB7DQoJCQkJY29uc3Qgb3B0aW9ucyA9IHsNCgkJCQkJaGVpZ2h0OiA2NDAsDQoJCQkJCW1vZGU6ICdzdicsLy/liIblsY/muLLmn5MNCgkJCQkJb3V0bGluZTogdHJ1ZSwvL+Wkp+e6sg0KCQkJCQljYWNoZTogey8v5LiN57yT5a2Y5YiwbG9jYWxTdG9yYWdlDQoJCQkJCQllbmFibGU6IGZhbHNlLA0KCQkJCQl9LA0KCQkJCQlyZXNpemU6IHsvL+WPr+iwg+aVtOmrmOW6pg0KCQkJCQkJZW5hYmxlOiB0cnVlDQoJCQkJCX0sDQoJCQkJCWFmdGVyOiAoKSA9PiB7DQoJCQkJCQl0aGlzLmdldERhdGEoKQ0KCQkJCQl9DQoJCQkJfQ0KCQkJCXRoaXMudmRpdG9yID0gbmV3IFZkaXRvcigndmRpdG9yJywgb3B0aW9ucykNCgkJCX0sDQoJCQlnZXREYXRhKCkgew0KCQkJCWdldEFib3V0KCkudGhlbihyZXMgPT4gew0KCQkJCQlpZiAocmVzLmNvZGUgPT09IDIwMCkgew0KCQkJCQkJdGhpcy5mb3JtLnRpdGxlID0gcmVzLmRhdGEudGl0bGUNCgkJCQkJCXRoaXMuZm9ybS5tdXNpY0lkID0gcmVzLmRhdGEubXVzaWNJZA0KCQkJCQkJdGhpcy5mb3JtLmNvbnRlbnQgPSByZXMuZGF0YS5jb250ZW50DQoJCQkJCQl0aGlzLmZvcm0uY29tbWVudEVuYWJsZWQgPSByZXMuZGF0YS5jb21tZW50RW5hYmxlZCA9PT0gJ3RydWUnID8gdHJ1ZSA6IGZhbHNlDQoJCQkJCQl0aGlzLnZkaXRvci5zZXRWYWx1ZSh0aGlzLmZvcm0uY29udGVudCkNCgkJCQkJCXRoaXMubXNnU3VjY2VzcyhyZXMubXNnKQ0KCQkJCQl9IGVsc2Ugew0KCQkJCQkJdGhpcy5tc2dFcnJvcihyZXMubXNnKQ0KCQkJCQl9DQoJCQkJfSkuY2F0Y2goKCkgPT4gew0KCQkJCQl0aGlzLm1zZ0Vycm9yKCLor7fmsYLlpLHotKUiKQ0KCQkJCX0pDQoJCQl9LA0KCQkJc3VibWl0KCkgew0KCQkJCXRoaXMuJHJlZnMuZm9ybVJlZi52YWxpZGF0ZSh2YWxpZCA9PiB7DQoJCQkJCWlmICh2YWxpZCkgew0KCQkJCQkJLy/nuq/mlbDlrZcNCgkJCQkJCWNvbnN0IHJlZyA9IC9eXGR7MSx9JC8NCgkJCQkJCWlmICghcmVnLnRlc3QodGhpcy5mb3JtLm11c2ljSWQpKSB7DQoJCQkJCQkJcmV0dXJuIHRoaXMubXNnRXJyb3IoIuatjOabsklE5pyJ6K+vIikNCgkJCQkJCX0NCgkJCQkJCWNvbnN0IGZvcm0gPSB7DQoJCQkJCQkJdGl0bGU6IHRoaXMuZm9ybS50aXRsZSwNCgkJCQkJCQltdXNpY0lkOiB0aGlzLmZvcm0ubXVzaWNJZCwNCgkJCQkJCQljb250ZW50OiB0aGlzLnZkaXRvci5nZXRWYWx1ZSgpLA0KCQkJCQkJCWNvbW1lbnRFbmFibGVkOiB0aGlzLmZvcm0uY29tbWVudEVuYWJsZWQNCgkJCQkJCX0NCgkJCQkJCXVwZGF0ZUFib3V0KGZvcm0pLnRoZW4ocmVzID0+IHsNCgkJCQkJCQlpZiAocmVzLmNvZGUgPT09IDIwMCkgew0KCQkJCQkJCQl0aGlzLm1zZ1N1Y2Nlc3MocmVzLm1zZykNCgkJCQkJCQl9IGVsc2Ugew0KCQkJCQkJCQl0aGlzLm1zZ0Vycm9yKHJlcy5tc2cpDQoJCQkJCQkJfQ0KCQkJCQkJfSkuY2F0Y2goKCkgPT4gew0KCQkJCQkJCXRoaXMubXNnRXJyb3IoIuivt+axguWksei0pSIpDQoJCQkJCQl9KQ0KCQkJCQl9IGVsc2Ugew0KCQkJCQkJcmV0dXJuIHRoaXMubXNnRXJyb3IoJ+ivt+Whq+WGmeW/heimgeeahOihqOWNlScpDQoJCQkJCX0NCgkJCQl9KQ0KCQkJfQ0KCQl9DQoJfQ0K"},{"version":3,"sources":["About.vue"],"names":[],"mappings":";AAmCA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"About.vue","sourceRoot":"src/views/page","sourcesContent":["<template>\r\n\t<div>\r\n\t\t<!--面包屑导航-->\r\n\t\t<Breadcrumb parentTitle=\"页面管理\"/>\r\n\r\n\t\t<el-form :model=\"form\" :rules=\"formRules\" ref=\"formRef\" label-position=\"top\">\r\n\t\t\t<el-form-item label=\"标题\" prop=\"title\" style=\"width: 50%\">\r\n\t\t\t\t<el-input v-model=\"form.title\" placeholder=\"请输入标题\"></el-input>\r\n\t\t\t</el-form-item>\r\n\r\n\t\t\t<el-row :gutter=\"20\" style=\"width: 50%\">\r\n\t\t\t\t<el-col :span=\"12\">\r\n\t\t\t\t\t<el-form-item label=\"网易云歌曲ID\" prop=\"musicId\">\r\n\t\t\t\t\t\t<el-input v-model=\"form.musicId\" type=\"number\" placeholder=\"请输入网易云歌曲ID（可选）\"></el-input>\r\n\t\t\t\t\t</el-form-item>\r\n\t\t\t\t</el-col>\r\n\t\t\t\t<el-col :span=\"12\">\r\n\t\t\t\t\t<el-form-item label=\"评论开关\">\r\n\t\t\t\t\t\t<el-switch v-model=\"form.commentEnabled\" active-text=\"评论\"></el-switch>\r\n\t\t\t\t\t</el-form-item>\r\n\t\t\t\t</el-col>\r\n\t\t\t</el-row>\r\n\r\n\t\t\t<el-form-item label=\"正文\" prop=\"content\">\r\n\t\t\t\t<div id=\"vditor\"></div>\r\n\t\t\t</el-form-item>\r\n\r\n\t\t\t<el-form-item style=\"text-align: right;\">\r\n\t\t\t\t<el-button type=\"primary\" icon=\"el-icon-check\" @click=\"submit\">保存</el-button>\r\n\t\t\t</el-form-item>\r\n\t\t</el-form>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n\timport Breadcrumb from \"@/components/Breadcrumb\";\r\n\timport {getAbout, updateAbout} from \"@/api/about\";\r\n\timport Vditor from \"vditor\";\r\n\r\n\texport default {\r\n\t\tname: \"About\",\r\n\t\tcomponents: {Breadcrumb},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tvditor: null,\r\n\t\t\t\tform: {\r\n\t\t\t\t\ttitle: '',\r\n\t\t\t\t\tmusicId: null,\r\n\t\t\t\t\tcontent: '',\r\n\t\t\t\t\tcommentEnabled: true\r\n\t\t\t\t},\r\n\t\t\t\tformRules: {\r\n\t\t\t\t\ttitle: [{required: true, message: '请输入标题', trigger: 'change'}],\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tmounted() {\r\n\t\t\tthis.initVditor()\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t//初始化md编辑器\r\n\t\t\tinitVditor() {\r\n\t\t\t\tconst options = {\r\n\t\t\t\t\theight: 640,\r\n\t\t\t\t\tmode: 'sv',//分屏渲染\r\n\t\t\t\t\toutline: true,//大纲\r\n\t\t\t\t\tcache: {//不缓存到localStorage\r\n\t\t\t\t\t\tenable: false,\r\n\t\t\t\t\t},\r\n\t\t\t\t\tresize: {//可调整高度\r\n\t\t\t\t\t\tenable: true\r\n\t\t\t\t\t},\r\n\t\t\t\t\tafter: () => {\r\n\t\t\t\t\t\tthis.getData()\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis.vditor = new Vditor('vditor', options)\r\n\t\t\t},\r\n\t\t\tgetData() {\r\n\t\t\t\tgetAbout().then(res => {\r\n\t\t\t\t\tif (res.code === 200) {\r\n\t\t\t\t\t\tthis.form.title = res.data.title\r\n\t\t\t\t\t\tthis.form.musicId = res.data.musicId\r\n\t\t\t\t\t\tthis.form.content = res.data.content\r\n\t\t\t\t\t\tthis.form.commentEnabled = res.data.commentEnabled === 'true' ? true : false\r\n\t\t\t\t\t\tthis.vditor.setValue(this.form.content)\r\n\t\t\t\t\t\tthis.msgSuccess(res.msg)\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.msgError(res.msg)\r\n\t\t\t\t\t}\r\n\t\t\t\t}).catch(() => {\r\n\t\t\t\t\tthis.msgError(\"请求失败\")\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tsubmit() {\r\n\t\t\t\tthis.$refs.formRef.validate(valid => {\r\n\t\t\t\t\tif (valid) {\r\n\t\t\t\t\t\t//纯数字\r\n\t\t\t\t\t\tconst reg = /^\\d{1,}$/\r\n\t\t\t\t\t\tif (!reg.test(this.form.musicId)) {\r\n\t\t\t\t\t\t\treturn this.msgError(\"歌曲ID有误\")\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tconst form = {\r\n\t\t\t\t\t\t\ttitle: this.form.title,\r\n\t\t\t\t\t\t\tmusicId: this.form.musicId,\r\n\t\t\t\t\t\t\tcontent: this.vditor.getValue(),\r\n\t\t\t\t\t\t\tcommentEnabled: this.form.commentEnabled\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tupdateAbout(form).then(res => {\r\n\t\t\t\t\t\t\tif (res.code === 200) {\r\n\t\t\t\t\t\t\t\tthis.msgSuccess(res.msg)\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthis.msgError(res.msg)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}).catch(() => {\r\n\t\t\t\t\t\t\tthis.msgError(\"请求失败\")\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn this.msgError('请填写必要的表单')\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>"]}]}