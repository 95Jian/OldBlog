{"remainingRequest":"D:\\finalProject3\\Blog\\blog-cms\\node_modules\\babel-loader\\lib\\index.js!D:\\finalProject3\\Blog\\blog-cms\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\finalProject3\\Blog\\blog-cms\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\finalProject3\\Blog\\blog-cms\\src\\views\\page\\About.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\finalProject3\\Blog\\blog-cms\\src\\views\\page\\About.vue","mtime":1724679300468},{"path":"D:\\finalProject3\\Blog\\blog-cms\\babel.config.js","mtime":1724679300450},{"path":"D:\\finalProject3\\Blog\\blog-cms\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1724724146465},{"path":"D:\\finalProject3\\Blog\\blog-cms\\node_modules\\babel-loader\\lib\\index.js","mtime":1724724148277},{"path":"D:\\finalProject3\\Blog\\blog-cms\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1724724146465},{"path":"D:\\finalProject3\\Blog\\blog-cms\\node_modules\\vue-loader\\lib\\index.js","mtime":1724724133444}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IEJyZWFkY3J1bWIgZnJvbSAiQC9jb21wb25lbnRzL0JyZWFkY3J1bWIiOwppbXBvcnQgeyBnZXRBYm91dCwgdXBkYXRlQWJvdXQgfSBmcm9tICJAL2FwaS9hYm91dCI7CmltcG9ydCBWZGl0b3IgZnJvbSAidmRpdG9yIjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJBYm91dCIsCiAgY29tcG9uZW50czogewogICAgQnJlYWRjcnVtYgogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHZkaXRvcjogbnVsbCwKICAgICAgZm9ybTogewogICAgICAgIHRpdGxlOiAnJywKICAgICAgICBtdXNpY0lkOiBudWxsLAogICAgICAgIGNvbnRlbnQ6ICcnLAogICAgICAgIGNvbW1lbnRFbmFibGVkOiB0cnVlCiAgICAgIH0sCiAgICAgIGZvcm1SdWxlczogewogICAgICAgIHRpdGxlOiBbewogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICBtZXNzYWdlOiAn6K+36L6T5YWl5qCH6aKYJywKICAgICAgICAgIHRyaWdnZXI6ICdjaGFuZ2UnCiAgICAgICAgfV0KICAgICAgfQogICAgfTsKICB9LAogIG1vdW50ZWQoKSB7CiAgICB0aGlzLmluaXRWZGl0b3IoKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIC8v5Yid5aeL5YyWbWTnvJbovpHlmagKICAgIGluaXRWZGl0b3IoKSB7CiAgICAgIGNvbnN0IG9wdGlvbnMgPSB7CiAgICAgICAgaGVpZ2h0OiA2NDAsCiAgICAgICAgbW9kZTogJ3N2JywKICAgICAgICAvL+WIhuWxj+a4suafkwogICAgICAgIG91dGxpbmU6IHRydWUsCiAgICAgICAgLy/lpKfnurIKICAgICAgICBjYWNoZTogewogICAgICAgICAgLy/kuI3nvJPlrZjliLBsb2NhbFN0b3JhZ2UKICAgICAgICAgIGVuYWJsZTogZmFsc2UKICAgICAgICB9LAogICAgICAgIHJlc2l6ZTogewogICAgICAgICAgLy/lj6/osIPmlbTpq5jluqYKICAgICAgICAgIGVuYWJsZTogdHJ1ZQogICAgICAgIH0sCiAgICAgICAgYWZ0ZXI6ICgpID0+IHsKICAgICAgICAgIHRoaXMuZ2V0RGF0YSgpOwogICAgICAgIH0KICAgICAgfTsKICAgICAgdGhpcy52ZGl0b3IgPSBuZXcgVmRpdG9yKCd2ZGl0b3InLCBvcHRpb25zKTsKICAgIH0sCiAgICBnZXREYXRhKCkgewogICAgICBnZXRBYm91dCgpLnRoZW4ocmVzID0+IHsKICAgICAgICBpZiAocmVzLmNvZGUgPT09IDIwMCkgewogICAgICAgICAgdGhpcy5mb3JtLnRpdGxlID0gcmVzLmRhdGEudGl0bGU7CiAgICAgICAgICB0aGlzLmZvcm0ubXVzaWNJZCA9IHJlcy5kYXRhLm11c2ljSWQ7CiAgICAgICAgICB0aGlzLmZvcm0uY29udGVudCA9IHJlcy5kYXRhLmNvbnRlbnQ7CiAgICAgICAgICB0aGlzLmZvcm0uY29tbWVudEVuYWJsZWQgPSByZXMuZGF0YS5jb21tZW50RW5hYmxlZCA9PT0gJ3RydWUnID8gdHJ1ZSA6IGZhbHNlOwogICAgICAgICAgdGhpcy52ZGl0b3Iuc2V0VmFsdWUodGhpcy5mb3JtLmNvbnRlbnQpOwogICAgICAgICAgdGhpcy5tc2dTdWNjZXNzKHJlcy5tc2cpOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLm1zZ0Vycm9yKHJlcy5tc2cpOwogICAgICAgIH0KICAgICAgfSkuY2F0Y2goKCkgPT4gewogICAgICAgIHRoaXMubXNnRXJyb3IoIuivt+axguWksei0pSIpOwogICAgICB9KTsKICAgIH0sCiAgICBzdWJtaXQoKSB7CiAgICAgIHRoaXMuJHJlZnMuZm9ybVJlZi52YWxpZGF0ZSh2YWxpZCA9PiB7CiAgICAgICAgaWYgKHZhbGlkKSB7CiAgICAgICAgICAvL+e6r+aVsOWtlwogICAgICAgICAgY29uc3QgcmVnID0gL15cZHsxLH0kLzsKICAgICAgICAgIGlmICghcmVnLnRlc3QodGhpcy5mb3JtLm11c2ljSWQpKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLm1zZ0Vycm9yKCLmrYzmm7JJROacieivryIpOwogICAgICAgICAgfQogICAgICAgICAgY29uc3QgZm9ybSA9IHsKICAgICAgICAgICAgdGl0bGU6IHRoaXMuZm9ybS50aXRsZSwKICAgICAgICAgICAgbXVzaWNJZDogdGhpcy5mb3JtLm11c2ljSWQsCiAgICAgICAgICAgIGNvbnRlbnQ6IHRoaXMudmRpdG9yLmdldFZhbHVlKCksCiAgICAgICAgICAgIGNvbW1lbnRFbmFibGVkOiB0aGlzLmZvcm0uY29tbWVudEVuYWJsZWQKICAgICAgICAgIH07CiAgICAgICAgICB1cGRhdGVBYm91dChmb3JtKS50aGVuKHJlcyA9PiB7CiAgICAgICAgICAgIGlmIChyZXMuY29kZSA9PT0gMjAwKSB7CiAgICAgICAgICAgICAgdGhpcy5tc2dTdWNjZXNzKHJlcy5tc2cpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgIHRoaXMubXNnRXJyb3IocmVzLm1zZyk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0pLmNhdGNoKCgpID0+IHsKICAgICAgICAgICAgdGhpcy5tc2dFcnJvcigi6K+35rGC5aSx6LSlIik7CiAgICAgICAgICB9KTsKICAgICAgICB9IGVsc2UgewogICAgICAgICAgcmV0dXJuIHRoaXMubXNnRXJyb3IoJ+ivt+Whq+WGmeW/heimgeeahOihqOWNlScpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"names":["Breadcrumb","getAbout","updateAbout","Vditor","name","components","data","vditor","form","title","musicId","content","commentEnabled","formRules","required","message","trigger","mounted","initVditor","methods","options","height","mode","outline","cache","enable","resize","after","getData","then","res","code","setValue","msgSuccess","msg","msgError","catch","submit","$refs","formRef","validate","valid","reg","test","getValue"],"sources":["src/views/page/About.vue"],"sourcesContent":["<template>\r\n\t<div>\r\n\t\t<!--面包屑导航-->\r\n\t\t<Breadcrumb parentTitle=\"页面管理\"/>\r\n\r\n\t\t<el-form :model=\"form\" :rules=\"formRules\" ref=\"formRef\" label-position=\"top\">\r\n\t\t\t<el-form-item label=\"标题\" prop=\"title\" style=\"width: 50%\">\r\n\t\t\t\t<el-input v-model=\"form.title\" placeholder=\"请输入标题\"></el-input>\r\n\t\t\t</el-form-item>\r\n\r\n\t\t\t<el-row :gutter=\"20\" style=\"width: 50%\">\r\n\t\t\t\t<el-col :span=\"12\">\r\n\t\t\t\t\t<el-form-item label=\"网易云歌曲ID\" prop=\"musicId\">\r\n\t\t\t\t\t\t<el-input v-model=\"form.musicId\" type=\"number\" placeholder=\"请输入网易云歌曲ID（可选）\"></el-input>\r\n\t\t\t\t\t</el-form-item>\r\n\t\t\t\t</el-col>\r\n\t\t\t\t<el-col :span=\"12\">\r\n\t\t\t\t\t<el-form-item label=\"评论开关\">\r\n\t\t\t\t\t\t<el-switch v-model=\"form.commentEnabled\" active-text=\"评论\"></el-switch>\r\n\t\t\t\t\t</el-form-item>\r\n\t\t\t\t</el-col>\r\n\t\t\t</el-row>\r\n\r\n\t\t\t<el-form-item label=\"正文\" prop=\"content\">\r\n\t\t\t\t<div id=\"vditor\"></div>\r\n\t\t\t</el-form-item>\r\n\r\n\t\t\t<el-form-item style=\"text-align: right;\">\r\n\t\t\t\t<el-button type=\"primary\" icon=\"el-icon-check\" @click=\"submit\">保存</el-button>\r\n\t\t\t</el-form-item>\r\n\t\t</el-form>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n\timport Breadcrumb from \"@/components/Breadcrumb\";\r\n\timport {getAbout, updateAbout} from \"@/api/about\";\r\n\timport Vditor from \"vditor\";\r\n\r\n\texport default {\r\n\t\tname: \"About\",\r\n\t\tcomponents: {Breadcrumb},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tvditor: null,\r\n\t\t\t\tform: {\r\n\t\t\t\t\ttitle: '',\r\n\t\t\t\t\tmusicId: null,\r\n\t\t\t\t\tcontent: '',\r\n\t\t\t\t\tcommentEnabled: true\r\n\t\t\t\t},\r\n\t\t\t\tformRules: {\r\n\t\t\t\t\ttitle: [{required: true, message: '请输入标题', trigger: 'change'}],\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tmounted() {\r\n\t\t\tthis.initVditor()\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t//初始化md编辑器\r\n\t\t\tinitVditor() {\r\n\t\t\t\tconst options = {\r\n\t\t\t\t\theight: 640,\r\n\t\t\t\t\tmode: 'sv',//分屏渲染\r\n\t\t\t\t\toutline: true,//大纲\r\n\t\t\t\t\tcache: {//不缓存到localStorage\r\n\t\t\t\t\t\tenable: false,\r\n\t\t\t\t\t},\r\n\t\t\t\t\tresize: {//可调整高度\r\n\t\t\t\t\t\tenable: true\r\n\t\t\t\t\t},\r\n\t\t\t\t\tafter: () => {\r\n\t\t\t\t\t\tthis.getData()\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis.vditor = new Vditor('vditor', options)\r\n\t\t\t},\r\n\t\t\tgetData() {\r\n\t\t\t\tgetAbout().then(res => {\r\n\t\t\t\t\tif (res.code === 200) {\r\n\t\t\t\t\t\tthis.form.title = res.data.title\r\n\t\t\t\t\t\tthis.form.musicId = res.data.musicId\r\n\t\t\t\t\t\tthis.form.content = res.data.content\r\n\t\t\t\t\t\tthis.form.commentEnabled = res.data.commentEnabled === 'true' ? true : false\r\n\t\t\t\t\t\tthis.vditor.setValue(this.form.content)\r\n\t\t\t\t\t\tthis.msgSuccess(res.msg)\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.msgError(res.msg)\r\n\t\t\t\t\t}\r\n\t\t\t\t}).catch(() => {\r\n\t\t\t\t\tthis.msgError(\"请求失败\")\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tsubmit() {\r\n\t\t\t\tthis.$refs.formRef.validate(valid => {\r\n\t\t\t\t\tif (valid) {\r\n\t\t\t\t\t\t//纯数字\r\n\t\t\t\t\t\tconst reg = /^\\d{1,}$/\r\n\t\t\t\t\t\tif (!reg.test(this.form.musicId)) {\r\n\t\t\t\t\t\t\treturn this.msgError(\"歌曲ID有误\")\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tconst form = {\r\n\t\t\t\t\t\t\ttitle: this.form.title,\r\n\t\t\t\t\t\t\tmusicId: this.form.musicId,\r\n\t\t\t\t\t\t\tcontent: this.vditor.getValue(),\r\n\t\t\t\t\t\t\tcommentEnabled: this.form.commentEnabled\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tupdateAbout(form).then(res => {\r\n\t\t\t\t\t\t\tif (res.code === 200) {\r\n\t\t\t\t\t\t\t\tthis.msgSuccess(res.msg)\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tthis.msgError(res.msg)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}).catch(() => {\r\n\t\t\t\t\t\t\tthis.msgError(\"请求失败\")\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn this.msgError('请填写必要的表单')\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style scoped>\r\n\r\n</style>"],"mappings":"AAmCA,OAAAA,UAAA;AACA,SAAAC,QAAA,EAAAC,WAAA;AACA,OAAAC,MAAA;AAEA;EACAC,IAAA;EACAC,UAAA;IAAAL;EAAA;EACAM,KAAA;IACA;MACAC,MAAA;MACAC,IAAA;QACAC,KAAA;QACAC,OAAA;QACAC,OAAA;QACAC,cAAA;MACA;MACAC,SAAA;QACAJ,KAAA;UAAAK,QAAA;UAAAC,OAAA;UAAAC,OAAA;QAAA;MACA;IACA;EACA;EACAC,QAAA;IACA,KAAAC,UAAA;EACA;EACAC,OAAA;IACA;IACAD,WAAA;MACA,MAAAE,OAAA;QACAC,MAAA;QACAC,IAAA;QAAA;QACAC,OAAA;QAAA;QACAC,KAAA;UAAA;UACAC,MAAA;QACA;QACAC,MAAA;UAAA;UACAD,MAAA;QACA;QACAE,KAAA,EAAAA,CAAA;UACA,KAAAC,OAAA;QACA;MACA;MACA,KAAArB,MAAA,OAAAJ,MAAA,WAAAiB,OAAA;IACA;IACAQ,QAAA;MACA3B,QAAA,GAAA4B,IAAA,CAAAC,GAAA;QACA,IAAAA,GAAA,CAAAC,IAAA;UACA,KAAAvB,IAAA,CAAAC,KAAA,GAAAqB,GAAA,CAAAxB,IAAA,CAAAG,KAAA;UACA,KAAAD,IAAA,CAAAE,OAAA,GAAAoB,GAAA,CAAAxB,IAAA,CAAAI,OAAA;UACA,KAAAF,IAAA,CAAAG,OAAA,GAAAmB,GAAA,CAAAxB,IAAA,CAAAK,OAAA;UACA,KAAAH,IAAA,CAAAI,cAAA,GAAAkB,GAAA,CAAAxB,IAAA,CAAAM,cAAA;UACA,KAAAL,MAAA,CAAAyB,QAAA,MAAAxB,IAAA,CAAAG,OAAA;UACA,KAAAsB,UAAA,CAAAH,GAAA,CAAAI,GAAA;QACA;UACA,KAAAC,QAAA,CAAAL,GAAA,CAAAI,GAAA;QACA;MACA,GAAAE,KAAA;QACA,KAAAD,QAAA;MACA;IACA;IACAE,OAAA;MACA,KAAAC,KAAA,CAAAC,OAAA,CAAAC,QAAA,CAAAC,KAAA;QACA,IAAAA,KAAA;UACA;UACA,MAAAC,GAAA;UACA,KAAAA,GAAA,CAAAC,IAAA,MAAAnC,IAAA,CAAAE,OAAA;YACA,YAAAyB,QAAA;UACA;UACA,MAAA3B,IAAA;YACAC,KAAA,OAAAD,IAAA,CAAAC,KAAA;YACAC,OAAA,OAAAF,IAAA,CAAAE,OAAA;YACAC,OAAA,OAAAJ,MAAA,CAAAqC,QAAA;YACAhC,cAAA,OAAAJ,IAAA,CAAAI;UACA;UACAV,WAAA,CAAAM,IAAA,EAAAqB,IAAA,CAAAC,GAAA;YACA,IAAAA,GAAA,CAAAC,IAAA;cACA,KAAAE,UAAA,CAAAH,GAAA,CAAAI,GAAA;YACA;cACA,KAAAC,QAAA,CAAAL,GAAA,CAAAI,GAAA;YACA;UACA,GAAAE,KAAA;YACA,KAAAD,QAAA;UACA;QACA;UACA,YAAAA,QAAA;QACA;MACA;IACA;EACA;AACA","ignoreList":[]}]}