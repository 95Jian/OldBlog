{"remainingRequest":"D:\\finalProject3\\Blog\\blog-cms\\node_modules\\babel-loader\\lib\\index.js!D:\\finalProject3\\Blog\\blog-cms\\src\\plugins\\axios.js","dependencies":[{"path":"D:\\finalProject3\\Blog\\blog-cms\\src\\plugins\\axios.js","mtime":1724679300463},{"path":"D:\\finalProject3\\Blog\\blog-cms\\babel.config.js","mtime":1724679300450},{"path":"D:\\finalProject3\\Blog\\blog-cms\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1724724146465},{"path":"D:\\finalProject3\\Blog\\blog-cms\\node_modules\\babel-loader\\lib\\index.js","mtime":1724724148277}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IGF4aW9zIGZyb20gImF4aW9zIjsKaW1wb3J0IE5Qcm9ncmVzcyBmcm9tICducHJvZ3Jlc3MnOwppbXBvcnQgJ25wcm9ncmVzcy9ucHJvZ3Jlc3MuY3NzJzsKaW1wb3J0IHsgTWVzc2FnZSB9IGZyb20gImVsZW1lbnQtdWkiOwpjb25zdCByZXF1ZXN0ID0gYXhpb3MuY3JlYXRlKHsKICBiYXNlVVJMOiAnaHR0cDovL2xvY2FsaG9zdDo4MDkwL2FkbWluLycsCiAgdGltZW91dDogMTAwMDAKfSk7CmxldCBDYW5jZWxUb2tlbiA9IGF4aW9zLkNhbmNlbFRva2VuOwoKLy8g6K+35rGC5oum5oiqCnJlcXVlc3QuaW50ZXJjZXB0b3JzLnJlcXVlc3QudXNlKGNvbmZpZyA9PiB7CiAgLy/lr7nkuo7orr/lrqLmqKHlvI/vvIzpmaRHRVTor7fmsYLlpJbvvIzpg73mi6bmiKrlubbmj5DnpLoKICBjb25zdCB1c2VySnNvbiA9IHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndXNlcicpIHx8ICd7fSc7CiAgY29uc3QgdXNlciA9IEpTT04ucGFyc2UodXNlckpzb24pOwogIGlmICh1c2VySnNvbiAhPT0gJ3t9JyAmJiB1c2VyLnJvbGUgIT09ICdST0xFX2FkbWluJyAmJiBjb25maWcubWV0aG9kICE9PSAnZ2V0JykgewogICAgY29uZmlnLmNhbmNlbFRva2VuID0gbmV3IENhbmNlbFRva2VuKGZ1bmN0aW9uIGV4ZWN1dG9yKGNhbmNlbCkgewogICAgICBjYW5jZWwoJ+a8lOekuuaooeW8j++8jOS4jeWFgeiuuOaTjeS9nCcpOwogICAgfSk7CiAgICByZXR1cm4gY29uZmlnOwogIH0KICBOUHJvZ3Jlc3Muc3RhcnQoKTsKICBjb25zdCB0b2tlbiA9IHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbSgndG9rZW4nKTsKICBpZiAodG9rZW4pIHsKICAgIGNvbmZpZy5oZWFkZXJzLkF1dGhvcml6YXRpb24gPSB0b2tlbjsKICB9CiAgcmV0dXJuIGNvbmZpZzsKfSk7CgovLyDlk43lupTmi6bmiKoKcmVxdWVzdC5pbnRlcmNlcHRvcnMucmVzcG9uc2UudXNlKGNvbmZpZyA9PiB7CiAgTlByb2dyZXNzLmRvbmUoKTsKICByZXR1cm4gY29uZmlnLmRhdGE7Cn0sIGVycm9yID0+IHsKICBpZiAoZXJyb3IubWVzc2FnZSA9PT0gJ+a8lOekuuaooeW8j++8jOS4jeWFgeiuuOaTjeS9nCcpIHsKICAgIE1lc3NhZ2UuZXJyb3IoZXJyb3IpOwogIH0KfSk7CmV4cG9ydCBkZWZhdWx0IHJlcXVlc3Q7"},{"version":3,"names":["axios","NProgress","Message","request","create","baseURL","timeout","CancelToken","interceptors","use","config","userJson","window","localStorage","getItem","user","JSON","parse","role","method","cancelToken","executor","cancel","start","token","headers","Authorization","response","done","data","error","message"],"sources":["D:/finalProject3/Blog/blog-cms/src/plugins/axios.js"],"sourcesContent":["import axios from \"axios\";\r\nimport NProgress from 'nprogress'\r\nimport 'nprogress/nprogress.css'\r\nimport {Message} from \"element-ui\"\r\n\r\nconst request = axios.create({\r\n\tbaseURL: 'http://localhost:8090/admin/',\r\n\ttimeout: 10000,\r\n})\r\n\r\nlet CancelToken = axios.CancelToken\r\n\r\n// 请求拦截\r\nrequest.interceptors.request.use(\r\n\tconfig => {\r\n\t\t//对于访客模式，除GET请求外，都拦截并提示\r\n\t\tconst userJson = window.localStorage.getItem('user') || '{}'\r\n\t\tconst user = JSON.parse(userJson)\r\n\t\tif (userJson !== '{}' && user.role !== 'ROLE_admin' && config.method !== 'get') {\r\n\t\t\tconfig.cancelToken = new CancelToken(function executor(cancel) {\r\n\t\t\t\tcancel('演示模式，不允许操作')\r\n\t\t\t})\r\n\t\t\treturn config\r\n\t\t}\r\n\t\tNProgress.start()\r\n\t\tconst token = window.localStorage.getItem('token')\r\n\t\tif (token) {\r\n\t\t\tconfig.headers.Authorization = token\r\n\t\t}\r\n\t\treturn config\r\n\t}\r\n)\r\n\r\n// 响应拦截\r\nrequest.interceptors.response.use(\r\n\tconfig => {\r\n\t\tNProgress.done()\r\n\t\treturn config.data\r\n\t}, error => {\r\n\t\tif (error.message === '演示模式，不允许操作') {\r\n\t\t\tMessage.error(error)\r\n\t\t}\r\n\t}\r\n)\r\n\r\nexport default request"],"mappings":"AAAA,OAAOA,KAAK,MAAM,OAAO;AACzB,OAAOC,SAAS,MAAM,WAAW;AACjC,OAAO,yBAAyB;AAChC,SAAQC,OAAO,QAAO,YAAY;AAElC,MAAMC,OAAO,GAAGH,KAAK,CAACI,MAAM,CAAC;EAC5BC,OAAO,EAAE,8BAA8B;EACvCC,OAAO,EAAE;AACV,CAAC,CAAC;AAEF,IAAIC,WAAW,GAAGP,KAAK,CAACO,WAAW;;AAEnC;AACAJ,OAAO,CAACK,YAAY,CAACL,OAAO,CAACM,GAAG,CAC/BC,MAAM,IAAI;EACT;EACA,MAAMC,QAAQ,GAAGC,MAAM,CAACC,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,IAAI,IAAI;EAC5D,MAAMC,IAAI,GAAGC,IAAI,CAACC,KAAK,CAACN,QAAQ,CAAC;EACjC,IAAIA,QAAQ,KAAK,IAAI,IAAII,IAAI,CAACG,IAAI,KAAK,YAAY,IAAIR,MAAM,CAACS,MAAM,KAAK,KAAK,EAAE;IAC/ET,MAAM,CAACU,WAAW,GAAG,IAAIb,WAAW,CAAC,SAASc,QAAQA,CAACC,MAAM,EAAE;MAC9DA,MAAM,CAAC,YAAY,CAAC;IACrB,CAAC,CAAC;IACF,OAAOZ,MAAM;EACd;EACAT,SAAS,CAACsB,KAAK,CAAC,CAAC;EACjB,MAAMC,KAAK,GAAGZ,MAAM,CAACC,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;EAClD,IAAIU,KAAK,EAAE;IACVd,MAAM,CAACe,OAAO,CAACC,aAAa,GAAGF,KAAK;EACrC;EACA,OAAOd,MAAM;AACd,CACD,CAAC;;AAED;AACAP,OAAO,CAACK,YAAY,CAACmB,QAAQ,CAAClB,GAAG,CAChCC,MAAM,IAAI;EACTT,SAAS,CAAC2B,IAAI,CAAC,CAAC;EAChB,OAAOlB,MAAM,CAACmB,IAAI;AACnB,CAAC,EAAEC,KAAK,IAAI;EACX,IAAIA,KAAK,CAACC,OAAO,KAAK,YAAY,EAAE;IACnC7B,OAAO,CAAC4B,KAAK,CAACA,KAAK,CAAC;EACrB;AACD,CACD,CAAC;AAED,eAAe3B,OAAO","ignoreList":[]}]}