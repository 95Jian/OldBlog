{"remainingRequest":"D:\\finalProject3\\Blog\\blog-cms\\node_modules\\babel-loader\\lib\\index.js!D:\\finalProject3\\Blog\\blog-cms\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!D:\\finalProject3\\Blog\\blog-cms\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!D:\\finalProject3\\Blog\\blog-cms\\src\\views\\blog\\blog\\WriteBlog.vue?vue&type=script&lang=js","dependencies":[{"path":"D:\\finalProject3\\Blog\\blog-cms\\src\\views\\blog\\blog\\WriteBlog.vue","mtime":1724744615943},{"path":"D:\\finalProject3\\Blog\\blog-cms\\babel.config.js","mtime":1724679300450},{"path":"D:\\finalProject3\\Blog\\blog-cms\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1724724146465},{"path":"D:\\finalProject3\\Blog\\blog-cms\\node_modules\\babel-loader\\lib\\index.js","mtime":1724724148277},{"path":"D:\\finalProject3\\Blog\\blog-cms\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1724724146465},{"path":"D:\\finalProject3\\Blog\\blog-cms\\node_modules\\vue-loader\\lib\\index.js","mtime":1724724133444}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkucHVzaC5qcyI7CmltcG9ydCBCcmVhZGNydW1iIGZyb20gIkAvY29tcG9uZW50cy9CcmVhZGNydW1iIjsKaW1wb3J0IHsgZ2V0Q2F0ZWdvcnlBbmRUYWcsIHNhdmVCbG9nLCBnZXRCbG9nQnlJZCwgdXBkYXRlQmxvZyB9IGZyb20gJ0AvYXBpL2Jsb2cnOwppbXBvcnQgVmRpdG9yIGZyb20gJ3ZkaXRvcic7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lOiAiV3JpdGVCbG9nIiwKICBjb21wb25lbnRzOiB7CiAgICBCcmVhZGNydW1iCiAgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgcmVhZHk6IGZhbHNlLAogICAgICBkZXNjcmlwdGlvblZkaXRvcjogbnVsbCwKICAgICAgY29udGVudFZkaXRvcjogbnVsbCwKICAgICAgY2F0ZWdvcnlMaXN0OiBbXSwKICAgICAgdGFnTGlzdDogW10sCiAgICAgIGRpYWxvZ1Zpc2libGU6IGZhbHNlLAogICAgICByYWRpbzogMSwKICAgICAgZm9ybTogewogICAgICAgIHRpdGxlOiAnJywKICAgICAgICBmaXJzdFBpY3R1cmU6ICcnLAogICAgICAgIGRlc2NyaXB0aW9uOiAnJywKICAgICAgICBjb250ZW50OiAnJywKICAgICAgICBjYXRlOiBudWxsLAogICAgICAgIHRhZ0xpc3Q6IFtdLAogICAgICAgIHdvcmRzOiBudWxsLAogICAgICAgIHJlYWRUaW1lOiBudWxsLAogICAgICAgIHZpZXdzOiAwLAogICAgICAgIGFwcHJlY2lhdGlvbjogZmFsc2UsCiAgICAgICAgcmVjb21tZW5kOiBmYWxzZSwKICAgICAgICBjb21tZW50RW5hYmxlZDogZmFsc2UsCiAgICAgICAgdG9wOiBmYWxzZSwKICAgICAgICBwdWJsaXNoZWQ6IGZhbHNlLAogICAgICAgIHBhc3N3b3JkOiAnJwogICAgICB9LAogICAgICBmb3JtUnVsZXM6IHsKICAgICAgICB0aXRsZTogW3sKICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgbWVzc2FnZTogJ+ivt+i+k+WFpeagh+mimCcsCiAgICAgICAgICB0cmlnZ2VyOiAnY2hhbmdlJwogICAgICAgIH1dLAogICAgICAgIC8vZmlyc3RQaWN0dXJlOiBbe3JlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn6K+36L6T5YWl6aaW5Zu+6ZO+5o6lJywgdHJpZ2dlcjogJ2NoYW5nZSd9XSwKICAgICAgICBjYXRlOiBbewogICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICBtZXNzYWdlOiAn6K+36YCJ5oup5YiG57G7JywKICAgICAgICAgIHRyaWdnZXI6ICdjaGFuZ2UnCiAgICAgICAgfV0KICAgICAgICAvLyB0YWdMaXN0OiBbe3JlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn6K+36YCJ5oup5qCH562+JywgdHJpZ2dlcjogJ2NoYW5nZSd9XSwKICAgICAgfQogICAgfTsKICB9LAogIGNyZWF0ZWQoKSB7CiAgICB0aGlzLmdldERhdGEoKTsKICB9LAogIG1vdW50ZWQoKSB7CiAgICB0aGlzLmluaXREZXNjcmlwdGlvblZkaXRvcigpOwogICAgdGhpcy5pbml0Q29udGVudFZkaXRvcigpOwogIH0sCiAgbWV0aG9kczogewogICAgLy/liJ3lp4vljJZtZOe8lui+keWZqAogICAgaW5pdERlc2NyaXB0aW9uVmRpdG9yKCkgewogICAgICBjb25zdCBvcHRpb25zID0gewogICAgICAgIGhlaWdodDogMzIwLAogICAgICAgIG1vZGU6ICdzdicsCiAgICAgICAgLy/liIblsY/muLLmn5MKICAgICAgICBvdXRsaW5lOiB0cnVlLAogICAgICAgIC8v5aSn57qyCiAgICAgICAgY2FjaGU6IHsKICAgICAgICAgIC8v5LiN57yT5a2Y5YiwbG9jYWxTdG9yYWdlCiAgICAgICAgICBlbmFibGU6IGZhbHNlCiAgICAgICAgfSwKICAgICAgICByZXNpemU6IHsKICAgICAgICAgIC8v5Y+v6LCD5pW06auY5bqmCiAgICAgICAgICBlbmFibGU6IHRydWUKICAgICAgICB9LAogICAgICAgIGFmdGVyOiAoKSA9PiB7CiAgICAgICAgICBpZiAoIXRoaXMucmVhZHkpIHsKICAgICAgICAgICAgdGhpcy5yZWFkeSA9IHRydWU7IC8v5Lik5Liq57yW6L6R5Zmo6YO95Yqg6L295a6M5oiQ5ZCO5omn6KGM77yM6YG/5YWN6YeN5aSN6K+35rGCCiAgICAgICAgICB9IGVsc2UgaWYgKHRoaXMuJHJvdXRlLnBhcmFtcy5pZCkgewogICAgICAgICAgICB0aGlzLmdldEJsb2codGhpcy4kcm91dGUucGFyYW1zLmlkKTsKICAgICAgICAgIH0KICAgICAgICB9CiAgICAgIH07CiAgICAgIHRoaXMuZGVzY3JpcHRpb25WZGl0b3IgPSBuZXcgVmRpdG9yKCd2ZGl0b3ItZGVzY3JpcHRpb24nLCBvcHRpb25zKTsKICAgIH0sCiAgICBpbml0Q29udGVudFZkaXRvcigpIHsKICAgICAgY29uc3Qgb3B0aW9ucyA9IHsKICAgICAgICBoZWlnaHQ6IDY0MCwKICAgICAgICBtb2RlOiAnc3YnLAogICAgICAgIC8v5YiG5bGP5riy5p+TCiAgICAgICAgb3V0bGluZTogdHJ1ZSwKICAgICAgICAvL+Wkp+e6sgogICAgICAgIGNhY2hlOiB7CiAgICAgICAgICAvL+S4jee8k+WtmOWIsGxvY2FsU3RvcmFnZQogICAgICAgICAgZW5hYmxlOiBmYWxzZQogICAgICAgIH0sCiAgICAgICAgcmVzaXplOiB7CiAgICAgICAgICAvL+WPr+iwg+aVtOmrmOW6pgogICAgICAgICAgZW5hYmxlOiB0cnVlCiAgICAgICAgfSwKICAgICAgICBhZnRlcjogKCkgPT4gewogICAgICAgICAgaWYgKCF0aGlzLnJlYWR5KSB7CiAgICAgICAgICAgIHRoaXMucmVhZHkgPSB0cnVlOwogICAgICAgICAgfSBlbHNlIGlmICh0aGlzLiRyb3V0ZS5wYXJhbXMuaWQpIHsKICAgICAgICAgICAgdGhpcy5nZXRCbG9nKHRoaXMuJHJvdXRlLnBhcmFtcy5pZCk7CiAgICAgICAgICB9CiAgICAgICAgfQogICAgICB9OwogICAgICB0aGlzLmNvbnRlbnRWZGl0b3IgPSBuZXcgVmRpdG9yKCd2ZGl0b3ItY29udGVudCcsIG9wdGlvbnMpOwogICAgfSwKICAgIGdldEJsb2coaWQpIHsKICAgICAgLy/nvJbovpHljZrlrqIKICAgICAgZ2V0QmxvZ0J5SWQoaWQpLnRoZW4ocmVzID0+IHsKICAgICAgICBpZiAocmVzLmNvZGUgPT09IDIwMCkgewogICAgICAgICAgdGhpcy5jb21wdXRlQ2F0ZWdvcnlBbmRUYWcocmVzLmRhdGEpOwogICAgICAgICAgLy8gdGhpcy5tc2dTdWNjZXNzKHJlcy5tc2cpOwogICAgICAgICAgdGhpcy5mb3JtID0gcmVzLmRhdGE7CiAgICAgICAgICB0aGlzLmRlc2NyaXB0aW9uVmRpdG9yLnNldFZhbHVlKHRoaXMuZm9ybS5kZXNjcmlwdGlvbik7CiAgICAgICAgICB0aGlzLmNvbnRlbnRWZGl0b3Iuc2V0VmFsdWUodGhpcy5mb3JtLmNvbnRlbnQpOwogICAgICAgICAgdGhpcy5yYWRpbyA9IHRoaXMuZm9ybS5wdWJsaXNoZWQgPyB0aGlzLmZvcm0ucGFzc3dvcmQgIT09ICcnID8gMyA6IDEgOiAyOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLm1zZ0Vycm9yKHJlcy5tc2cpOwogICAgICAgIH0KICAgICAgfSkuY2F0Y2goKCkgPT4gewogICAgICAgIHRoaXMubXNnRXJyb3IoJ+ivt+axguWksei0pScpOwogICAgICB9KTsKICAgIH0sCiAgICBjb21wdXRlQ2F0ZWdvcnlBbmRUYWcoYmxvZykgewogICAgICBibG9nLmNhdGUgPSBibG9nLmNhdGVnb3J5LmlkOwogICAgICBibG9nLnRhZ0xpc3QgPSBbXTsKICAgICAgYmxvZy50YWdzLmZvckVhY2goaXRlbSA9PiB7CiAgICAgICAgYmxvZy50YWdMaXN0LnB1c2goaXRlbS5pZCk7CiAgICAgIH0pOwogICAgfSwKICAgIGdldERhdGEoKSB7CiAgICAgIC8v6I635Y+W55uu5b2V5ZKM5qCH562+CiAgICAgIGdldENhdGVnb3J5QW5kVGFnKCkudGhlbihyZXMgPT4gewogICAgICAgIGlmIChyZXMuY29kZSA9PT0gMjAwKSB7CiAgICAgICAgICAvLyB0aGlzLm1zZ1N1Y2Nlc3MocmVzLm1zZyk7CiAgICAgICAgICB0aGlzLmNhdGVnb3J5TGlzdCA9IHJlcy5kYXRhLmNhdGVnb3JpZXM7CiAgICAgICAgICB0aGlzLnRhZ0xpc3QgPSByZXMuZGF0YS50YWdzOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICB0aGlzLm1zZ0Vycm9yKHJlcy5tc2cpOwogICAgICAgIH0KICAgICAgfSkuY2F0Y2goKCkgPT4gewogICAgICAgIHRoaXMubXNnRXJyb3IoJ+ivt+axguWksei0pScpOwogICAgICB9KTsKICAgIH0sCiAgICBzdWJtaXQoKSB7CiAgICAgIGlmICh0aGlzLnJhZGlvID09PSAzICYmICh0aGlzLmZvcm0ucGFzc3dvcmQgPT09ICcnIHx8IHRoaXMuZm9ybS5wYXNzd29yZCA9PT0gbnVsbCkpIHsKICAgICAgICByZXR1cm4gdGhpcy5tc2dFcnJvcigi5a+G56CB5L+d5oqk5qih5byP5b+F6aG75aGr5YaZ5a+G56CB77yBIik7CiAgICAgIH0KICAgICAgdGhpcy4kcmVmcy5mb3JtUmVmLnZhbGlkYXRlKHZhbGlkID0+IHsKICAgICAgICBpZiAodmFsaWQpIHsKICAgICAgICAgIHRoaXMuZm9ybS5kZXNjcmlwdGlvbiA9IHRoaXMuZGVzY3JpcHRpb25WZGl0b3IuZ2V0VmFsdWUoKTsKICAgICAgICAgIHRoaXMuZm9ybS5jb250ZW50ID0gdGhpcy5jb250ZW50VmRpdG9yLmdldFZhbHVlKCk7CiAgICAgICAgICBpZiAodGhpcy5yYWRpbyA9PT0gMikgewogICAgICAgICAgICB0aGlzLmZvcm0uYXBwcmVjaWF0aW9uID0gZmFsc2U7CiAgICAgICAgICAgIHRoaXMuZm9ybS5yZWNvbW1lbmQgPSBmYWxzZTsKICAgICAgICAgICAgdGhpcy5mb3JtLmNvbW1lbnRFbmFibGVkID0gZmFsc2U7CiAgICAgICAgICAgIHRoaXMuZm9ybS50b3AgPSBmYWxzZTsKICAgICAgICAgICAgdGhpcy5mb3JtLnB1Ymxpc2hlZCA9IGZhbHNlOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdGhpcy5mb3JtLnB1Ymxpc2hlZCA9IHRydWU7CiAgICAgICAgICB9CiAgICAgICAgICBpZiAodGhpcy5yYWRpbyAhPT0gMykgewogICAgICAgICAgICB0aGlzLmZvcm0ucGFzc3dvcmQgPSAnJzsKICAgICAgICAgIH0KICAgICAgICAgIGlmICh0aGlzLiRyb3V0ZS5wYXJhbXMuaWQpIHsKICAgICAgICAgICAgdGhpcy5mb3JtLmNhdGVnb3J5ID0gbnVsbDsKICAgICAgICAgICAgdGhpcy5mb3JtLnRhZ3MgPSBudWxsOwogICAgICAgICAgICB1cGRhdGVCbG9nKHRoaXMuZm9ybSkudGhlbihyZXMgPT4gewogICAgICAgICAgICAgIGlmIChyZXMuY29kZSA9PT0gMjAwKSB7CiAgICAgICAgICAgICAgICB0aGlzLm1zZ1N1Y2Nlc3MocmVzLm1zZyk7CiAgICAgICAgICAgICAgICB0aGlzLiRyb3V0ZXIucHVzaCgnL2Jsb2dzJyk7CiAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHRoaXMubXNnRXJyb3IocmVzLm1zZyk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9KS5jYXRjaCgoKSA9PiB7CiAgICAgICAgICAgICAgdGhpcy5tc2dFcnJvcign6K+35rGC5aSx6LSlJyk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgc2F2ZUJsb2codGhpcy5mb3JtKS50aGVuKHJlcyA9PiB7CiAgICAgICAgICAgICAgaWYgKHJlcy5jb2RlID09PSAyMDApIHsKICAgICAgICAgICAgICAgIHRoaXMubXNnU3VjY2VzcyhyZXMubXNnKTsKICAgICAgICAgICAgICAgIHRoaXMuJHJvdXRlci5wdXNoKCcvYmxvZ3MnKTsKICAgICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgdGhpcy5tc2dFcnJvcihyZXMubXNnKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pLmNhdGNoKCgpID0+IHsKICAgICAgICAgICAgICB0aGlzLm1zZ0Vycm9yKCfor7fmsYLlpLHotKUnKTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IGZhbHNlOwogICAgICAgICAgcmV0dXJuIHRoaXMubXNnRXJyb3IoJ+ivt+Whq+WGmeW/heimgeeahOihqOWNlemhuScpOwogICAgICAgIH0KICAgICAgfSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"names":["Breadcrumb","getCategoryAndTag","saveBlog","getBlogById","updateBlog","Vditor","name","components","data","ready","descriptionVditor","contentVditor","categoryList","tagList","dialogVisible","radio","form","title","firstPicture","description","content","cate","words","readTime","views","appreciation","recommend","commentEnabled","top","published","password","formRules","required","message","trigger","created","getData","mounted","initDescriptionVditor","initContentVditor","methods","options","height","mode","outline","cache","enable","resize","after","$route","params","id","getBlog","then","res","code","computeCategoryAndTag","setValue","msgError","msg","catch","blog","category","tags","forEach","item","push","categories","submit","$refs","formRef","validate","valid","getValue","msgSuccess","$router"],"sources":["src/views/blog/blog/WriteBlog.vue"],"sourcesContent":["<template>\r\n\t<div>\r\n\t\t<!--面包屑导航-->\r\n\t\t<Breadcrumb parentTitle=\"博客管理\"/>\r\n\r\n\t\t<el-form :model=\"form\" :rules=\"formRules\" ref=\"formRef\" label-position=\"top\">\r\n\t\t\t<el-row :gutter=\"20\">\r\n\t\t\t\t<el-col :span=\"12\">\r\n\t\t\t\t\t<el-form-item label=\"标题\" prop=\"title\">\r\n\t\t\t\t\t\t<el-input v-model=\"form.title\" placeholder=\"请输入标题\"></el-input>\r\n\t\t\t\t\t</el-form-item>\r\n\t\t\t\t</el-col>\r\n\t\t\t\t<!-- <el-col :span=\"12\">\r\n\t\t\t\t\t<el-form-item label=\"封面图\" prop=\"firstPicture\">\r\n\t\t\t\t\t\t<el-input v-model=\"form.firstPicture\" placeholder=\"可不填，随机获取\"></el-input>\r\n\t\t\t\t\t</el-form-item>\r\n\t\t\t\t</el-col> -->\r\n\t\t\t</el-row>\r\n\r\n\t\t\t<!-- <el-alert title=\"注意：如果从 Typora 中复制 Markdown，粘贴时要选择粘贴为纯文本，\r\n\t\t\t 否则代码块可能无法被 prismjs 高亮\" type=\"warning\" center show-icon></el-alert> -->\r\n\r\n\t\t\t<el-form-item label=\"描述\" prop=\"description\">\r\n\t\t\t\t<div id=\"vditor-description\"></div>\r\n\t\t\t</el-form-item>\r\n\r\n\t\t\t<el-form-item label=\"正文\" prop=\"content\">\r\n\t\t\t\t<div id=\"vditor-content\"></div>\r\n\t\t\t</el-form-item>\r\n\r\n\t\t\t<el-row :gutter=\"20\">\r\n\t\t\t\t<el-col :span=\"12\">\r\n\t\t\t\t\t<el-form-item label=\"分类\" prop=\"cate\">\r\n\t\t\t\t\t\t<el-select v-model=\"form.cate\" placeholder=\"请选择分类（输入可添加新分类）\" :allow-create=\"true\" :filterable=\"true\" style=\"width: 100%;\">\r\n\t\t\t\t\t\t\t<el-option :label=\"item.name\" :value=\"item.id\" v-for=\"item in categoryList\" :key=\"item.id\"></el-option>\r\n\t\t\t\t\t\t</el-select>\r\n\t\t\t\t\t</el-form-item>\r\n\t\t\t\t</el-col>\r\n\t\t\t\t<el-col :span=\"12\">\r\n\t\t\t\t\t<el-form-item label=\"标签\" prop=\"tagList\">\r\n\t\t\t\t\t\t<el-select v-model=\"form.tagList\" placeholder=\"请选择标签（输入可添加新标签）\" :allow-create=\"true\" :filterable=\"true\" :multiple=\"true\" style=\"width: 100%;\">\r\n\t\t\t\t\t\t\t<el-option :label=\"item.name\" :value=\"item.id\" v-for=\"item in tagList\" :key=\"item.id\"></el-option>\r\n\t\t\t\t\t\t</el-select>\r\n\t\t\t\t\t</el-form-item>\r\n\t\t\t\t</el-col>\r\n\t\t\t</el-row>\r\n\r\n\t\t\t<!-- <el-form-item label=\"浏览次数\" prop=\"views\">\r\n\t\t\t\t<el-input v-model=\"form.views\" placeholder=\"文章访问量（默认为 0）\" type=\"number\" style=\"width: 50%;\"></el-input>\r\n\t\t\t</el-form-item> -->\r\n\r\n\t\t\t<el-form-item style=\"text-align: right;\">\r\n\t\t\t\t<el-button type=\"primary\" @click=\"dialogVisible=true\">保存</el-button>\r\n\t\t\t</el-form-item>\r\n\t\t</el-form>\r\n\r\n\t\t<!--编辑可见性状态对话框-->\r\n\t\t<el-dialog title=\"博客可见性\" width=\"30%\" :visible.sync=\"dialogVisible\">\r\n\t\t\t<!--内容主体-->\r\n\t\t\t<el-form label-width=\"50px\" @submit.native.prevent>\r\n\t\t\t\t<el-form-item>\r\n\t\t\t\t\t<el-radio-group v-model=\"radio\">\r\n\t\t\t\t\t\t<el-radio :label=\"1\">公开</el-radio>\r\n\t\t\t\t\t\t<el-radio :label=\"2\">私密</el-radio>\r\n\t\t\t\t\t\t<el-radio :label=\"3\">密码保护</el-radio>\r\n\t\t\t\t\t</el-radio-group>\r\n\t\t\t\t</el-form-item>\r\n\t\t\t\t<el-form-item label=\"密码\" v-if=\"radio===3\">\r\n\t\t\t\t\t<el-input v-model=\"form.password\"></el-input>\r\n\t\t\t\t</el-form-item>\r\n\t\t\t\t<el-form-item v-if=\"radio!==2\">\r\n\t\t\t\t\t<el-row>\r\n\t\t\t\t\t\t<!-- <el-col :span=\"6\">\r\n\t\t\t\t\t\t\t<el-switch v-model=\"form.appreciation\" active-text=\"赞赏\"></el-switch>\r\n\t\t\t\t\t\t</el-col> -->\r\n\t\t\t\t\t\t<el-col :span=\"6\">\r\n\t\t\t\t\t\t\t<el-switch v-model=\"form.recommend\" active-text=\"推荐\"></el-switch>\r\n\t\t\t\t\t\t</el-col>\r\n\t\t\t\t\t\t<!-- <el-col :span=\"6\">\r\n\t\t\t\t\t\t\t<el-switch v-model=\"form.commentEnabled\" active-text=\"评论\"></el-switch>\r\n\t\t\t\t\t\t</el-col> -->\r\n\t\t\t\t\t\t<el-col :span=\"6\">\r\n\t\t\t\t\t\t\t<el-switch v-model=\"form.top\" active-text=\"置顶\"></el-switch>\r\n\t\t\t\t\t\t</el-col>\r\n\t\t\t\t\t</el-row>\r\n\t\t\t\t</el-form-item>\r\n\t\t\t</el-form>\r\n\t\t\t<!--底部-->\r\n\t\t\t<span slot=\"footer\">\r\n\t\t\t\t<el-button @click=\"dialogVisible=false\">取 消</el-button>\r\n\t\t\t\t<el-button type=\"primary\" @click=\"submit\">保存</el-button>\r\n\t\t\t</span>\r\n\t\t</el-dialog>\r\n\t</div>\r\n</template>\r\n\r\n<script>\r\n\timport Breadcrumb from \"@/components/Breadcrumb\";\r\n\timport {getCategoryAndTag, saveBlog, getBlogById, updateBlog} from '@/api/blog'\r\n\timport Vditor from 'vditor'\r\n\r\n\texport default {\r\n\t\tname: \"WriteBlog\",\r\n\t\tcomponents: {Breadcrumb},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tready: false,\r\n\t\t\t\tdescriptionVditor: null,\r\n\t\t\t\tcontentVditor: null,\r\n\t\t\t\tcategoryList: [],\r\n\t\t\t\ttagList: [],\r\n\t\t\t\tdialogVisible: false,\r\n\t\t\t\tradio: 1,\r\n\t\t\t\tform: {\r\n\t\t\t\t\ttitle: '',\r\n\t\t\t\t\tfirstPicture: '',\r\n\t\t\t\t\tdescription: '',\r\n\t\t\t\t\tcontent: '',\r\n\t\t\t\t\tcate: null,\r\n\t\t\t\t\ttagList: [],\r\n\t\t\t\t\twords: null,\r\n\t\t\t\t\treadTime: null,\r\n\t\t\t\t\tviews: 0,\r\n\t\t\t\t\tappreciation: false,\r\n\t\t\t\t\trecommend: false,\r\n\t\t\t\t\tcommentEnabled: false,\r\n\t\t\t\t\ttop: false,\r\n\t\t\t\t\tpublished: false,\r\n\t\t\t\t\tpassword: '',\r\n\t\t\t\t},\r\n\t\t\t\tformRules: {\r\n\t\t\t\t\ttitle: [{required: true, message: '请输入标题', trigger: 'change'}],\r\n\t\t\t\t\t//firstPicture: [{required: true, message: '请输入首图链接', trigger: 'change'}],\r\n\t\t\t\t\tcate: [{required: true, message: '请选择分类', trigger: 'change'}],\r\n\t\t\t\t\t// tagList: [{required: true, message: '请选择标签', trigger: 'change'}],\r\n\t\t\t\t},\r\n\t\t\t}\r\n\t\t},\r\n\t\tcreated() {\r\n\t\t\tthis.getData()\r\n\t\t},\r\n\t\tmounted() {\r\n\t\t\tthis.initDescriptionVditor()\r\n\t\t\tthis.initContentVditor()\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\t//初始化md编辑器\r\n\t\t\tinitDescriptionVditor() {\r\n\t\t\t\tconst options = {\r\n\t\t\t\t\theight: 320,\r\n\t\t\t\t\tmode: 'sv',//分屏渲染\r\n\t\t\t\t\toutline: true,//大纲\r\n\t\t\t\t\tcache: {//不缓存到localStorage\r\n\t\t\t\t\t\tenable: false,\r\n\t\t\t\t\t},\r\n\t\t\t\t\tresize: {//可调整高度\r\n\t\t\t\t\t\tenable: true\r\n\t\t\t\t\t},\r\n\t\t\t\t\tafter: () => {\r\n\t\t\t\t\t\tif (!this.ready) {\r\n\t\t\t\t\t\t\tthis.ready = true //两个编辑器都加载完成后执行，避免重复请求\r\n\t\t\t\t\t\t} else if (this.$route.params.id) {\r\n\t\t\t\t\t\t\tthis.getBlog(this.$route.params.id)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis.descriptionVditor = new Vditor('vditor-description', options)\r\n\t\t\t},\r\n\t\t\tinitContentVditor() {\r\n\t\t\t\tconst options = {\r\n\t\t\t\t\theight: 640,\r\n\t\t\t\t\tmode: 'sv',//分屏渲染\r\n\t\t\t\t\toutline: true,//大纲\r\n\t\t\t\t\tcache: {//不缓存到localStorage\r\n\t\t\t\t\t\tenable: false,\r\n\t\t\t\t\t},\r\n\t\t\t\t\tresize: {//可调整高度\r\n\t\t\t\t\t\tenable: true\r\n\t\t\t\t\t},\r\n\t\t\t\t\tafter: () => {\r\n\t\t\t\t\t\tif (!this.ready) {\r\n\t\t\t\t\t\t\tthis.ready = true\r\n\t\t\t\t\t\t} else if (this.$route.params.id) {\r\n\t\t\t\t\t\t\tthis.getBlog(this.$route.params.id)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis.contentVditor = new Vditor('vditor-content', options)\r\n\t\t\t},\r\n\t\t\tgetBlog(id) {\r\n\t\t\t\t//编辑博客\r\n\t\t\t\tgetBlogById(id).then(res => {\r\n\t\t\t\t\tif (res.code === 200) {\r\n\t\t\t\t\t\tthis.computeCategoryAndTag(res.data)\r\n\t\t\t\t\t\t// this.msgSuccess(res.msg);\r\n\t\t\t\t\t\tthis.form = res.data\r\n\t\t\t\t\t\tthis.descriptionVditor.setValue(this.form.description)\r\n\t\t\t\t\t\tthis.contentVditor.setValue(this.form.content)\r\n\t\t\t\t\t\tthis.radio = this.form.published ? (this.form.password !== '' ? 3 : 1) : 2\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.msgError(res.msg)\r\n\t\t\t\t\t}\r\n\t\t\t\t}).catch(() => {\r\n\t\t\t\t\tthis.msgError('请求失败')\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tcomputeCategoryAndTag(blog) {\r\n\t\t\t\tblog.cate = blog.category.id\r\n\t\t\t\tblog.tagList = []\r\n\t\t\t\tblog.tags.forEach(item => {\r\n\t\t\t\t\tblog.tagList.push(item.id)\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tgetData() {\r\n\t\t\t\t//获取目录和标签\r\n\t\t\t\tgetCategoryAndTag().then(res => {\r\n\t\t\t\t\tif (res.code === 200) {\r\n\t\t\t\t\t\t// this.msgSuccess(res.msg);\r\n\t\t\t\t\t\tthis.categoryList = res.data.categories\r\n\t\t\t\t\t\tthis.tagList = res.data.tags\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.msgError(res.msg)\r\n\t\t\t\t\t}\r\n\t\t\t\t}).catch(() => {\r\n\t\t\t\t\tthis.msgError('请求失败')\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tsubmit() {\r\n\t\t\t\tif (this.radio === 3 && (this.form.password === '' || this.form.password === null)) {\r\n\t\t\t\t\treturn this.msgError(\"密码保护模式必须填写密码！\")\r\n\t\t\t\t}\r\n\t\t\t\tthis.$refs.formRef.validate(valid => {\r\n\t\t\t\t\tif (valid) {\r\n\t\t\t\t\t\tthis.form.description = this.descriptionVditor.getValue()\r\n\t\t\t\t\t\tthis.form.content = this.contentVditor.getValue()\r\n\t\t\t\t\t\tif (this.radio === 2) {\r\n\t\t\t\t\t\t\tthis.form.appreciation = false\r\n\t\t\t\t\t\t\tthis.form.recommend = false\r\n\t\t\t\t\t\t\tthis.form.commentEnabled = false\r\n\t\t\t\t\t\t\tthis.form.top = false\r\n\t\t\t\t\t\t\tthis.form.published = false\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthis.form.published = true\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (this.radio !== 3) {\r\n\t\t\t\t\t\t\tthis.form.password = ''\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (this.$route.params.id) {\r\n\t\t\t\t\t\t\tthis.form.category = null\r\n\t\t\t\t\t\t\tthis.form.tags = null\r\n\t\t\t\t\t\t\tupdateBlog(this.form).then(res => {\r\n\t\t\t\t\t\t\t\tif (res.code === 200) {\r\n\t\t\t\t\t\t\t\t\tthis.msgSuccess(res.msg)\r\n\t\t\t\t\t\t\t\t\tthis.$router.push('/blogs')\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tthis.msgError(res.msg)\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}).catch(() => {\r\n\t\t\t\t\t\t\t\tthis.msgError('请求失败')\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tsaveBlog(this.form).then(res => {\r\n\t\t\t\t\t\t\t\tif (res.code === 200) {\r\n\t\t\t\t\t\t\t\t\tthis.msgSuccess(res.msg)\r\n\t\t\t\t\t\t\t\t\tthis.$router.push('/blogs')\r\n\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\tthis.msgError(res.msg)\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}).catch(() => {\r\n\t\t\t\t\t\t\t\tthis.msgError('请求失败')\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthis.dialogVisible = false\r\n\t\t\t\t\t\treturn this.msgError('请填写必要的表单项')\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style scoped>\r\n\t@import \"~vditor/dist/index.css\";\r\n</style>"],"mappings":"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","ignoreList":[]}]}